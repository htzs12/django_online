function Banners(){}Banners.prototype.listenBannersEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加６张轮播图！"):n.createBannerItem()})},Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}})},Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e),console.log(e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"您确定要删除这个轮播图吗？",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除成功！"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find('input[name="priority"]'),o=t.find('input[name="link_to"]'),s=t.find('span[class="priority"]'),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:a,id:c},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改完成！"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加完成！")),s.text("优先级："+e))}})})},Banners.prototype.run=function(){this.listenBannersEvent(),this.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImxpc3RlbkJhbm5lcnNFdmVudCIsInNlbGYiLCJ0aGlzIiwiJCIsImNsaWNrIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJjcmVhdGVCYW5uZXJJdGVtIiwibG9hZERhdGEiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc2x1dCIsImJhbm5lcnMiLCJpIiwiYmFubmVyIiwidHBsIiwidGVtcGxhdGUiLCJiYW5uZXJMaXN0R3JvdXAiLCJiYW5uZXJJdGVtIiwiYXBwZW5kIiwiZmluZCIsInByZXBlbmQiLCJhZGRJbWFnZVNlbGVjdEV2ZW50IiwiYWRkUmVtb3ZlQmFubmVyRXZlbnQiLCJhZGRTYXZlQmFubmVyRXZlbnQiLCJpbWFnZSIsImltYWdlSW5wdXQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwicG9zdCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwicmVzdWx0IiwiYXR0ciIsImNvbnNvbGUiLCJsb2ciLCJiYW5uZXJJZCIsInhmemFsZXJ0IiwiYWxlcnRDb25maXJtIiwidGV4dCIsImNvbmZpcm1DYWxsYmFjayIsImJhbm5lcl9pZCIsInJlbW92ZSIsInNob3dTdWNjZXNzIiwic2F2ZUJ0biIsImltYWdlVGFnIiwicHJpb3JpdHlUYWciLCJsaW5rdG9UYWciLCJwcmlvcml0eVNwYW4iLCJpbWFnZV91cmwiLCJwcmlvcml0eSIsInZhbCIsImxpbmtfdG8iLCJpZCIsInJ1biJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsV0FLVEEsUUFBUUMsVUFBVUMsbUJBQXFCLFdBQ25DLElBQUlDLEVBQU9DLEtBQ0VDLEVBQUUsbUJBQ1JDLE1BQU0sV0FHSyxHQUZRRCxFQUFFLHNCQUNLRSxXQUFXQyxPQUVwQ0MsT0FBT0MsV0FBV0MsU0FBUyxnQkFH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QVE3QzdELFFBQVFDLFVBQVVnRSxJQUFNLFdBQ3BCN0QsS0FBS0YscUJBQ0xFLEtBQUtTLFlBSVRSLEVBQUUsWUFDZ0IsSUFBSUwsU0FDVmlFIiwiZmlsZSI6ImJhbm5lcnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5mdW5jdGlvbiBCYW5uZXJzKCkge1xuXG59XG5cblxuQmFubmVycy5wcm90b3R5cGUubGlzdGVuQmFubmVyc0V2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYWRkQnRuID0gJCgnI2FkZC1iYW5uZXItYnRuJyk7XG4gICAgYWRkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xuICAgICAgICB2YXIgbGVuZ3RoID0gYmFubmVyTGlzdEdyb3VwLmNoaWxkcmVuKCkubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoID49IDYpe1xuICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0luZm8oJ+acgOWkmuWPquiDvea3u+WKoO+8luW8oOi9ruaSreWbvu+8gScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbSgpO1xuICAgIH0pO1xufTtcblxuXG5CYW5uZXJzLnByb3RvdHlwZS5sb2FkRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAndXJsJzonL2Ntcy9iYW5uZXJfbGlzdC8nLFxuICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc2x1dCkge1xuICAgICAgICAgICAgaWYocmVzbHV0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgdmFyIGJhbm5lcnMgPSByZXNsdXRbJ2RhdGEnXTtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDtpPGJhbm5lcnMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXIgPSBiYW5uZXJzW2ldO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUJhbm5lckl0ZW0oYmFubmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cblxuQmFubmVycy5wcm90b3R5cGUuY3JlYXRlQmFubmVySXRlbSA9IGZ1bmN0aW9uIChiYW5uZXIpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRwbCA9IHRlbXBsYXRlKCdiYW5uZXItaXRlbScseydiYW5uZXInOmJhbm5lcn0pO1xuICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKCcuYmFubmVyLWxpc3QtZ3JvdXAnKTtcblxuICAgIHZhciBiYW5uZXJJdGVtID0gbnVsbDtcbiAgICBpZihiYW5uZXIpe1xuICAgICAgICBiYW5uZXJMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZCgnLmJhbm5lci1pdGVtOmxhc3QnKTtcbiAgICB9ZWxzZSB7XG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5wcmVwZW5kKHRwbCk7XG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZCgnLmJhbm5lci1pdGVtOmZpcnN0Jyk7XG4gICAgfVxuICAgIHNlbGYuYWRkSW1hZ2VTZWxlY3RFdmVudChiYW5uZXJJdGVtKTtcbiAgICBzZWxmLmFkZFJlbW92ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xuICAgIHNlbGYuYWRkU2F2ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xufTtcblxuXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRJbWFnZVNlbGVjdEV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGltYWdlID0gYmFubmVySXRlbS5maW5kKCcudGh1bWJuYWlsJyk7XG4gICAgdmFyIGltYWdlSW5wdXQgPSBiYW5uZXJJdGVtLmZpbmQoJy5pbWFnZS1pbnB1dCcpO1xuICAgIGltYWdlLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW1hZ2VJbnB1dC5jbGljaygpO1xuICAgIH0pO1xuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJyxmaWxlKTtcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOicvY21zL3VwbG9hZF9maWxlLycsXG4gICAgICAgICAgICAnZGF0YSc6Zm9ybURhdGEsXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UuYXR0cignc3JjJyx1cmwpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5cbkJhbm5lcnMucHJvdG90eXBlLmFkZFJlbW92ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcbiAgICB2YXIgY2xvc2VCdG4gPSBiYW5uZXJJdGVtLmZpbmQoJy5jbG9zZS1idG4nKTtcblxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcpO1xuICAgICAgICBpZiAoYmFubmVySWQpe1xuICAgICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xuICAgICAgICAgICAgICAgJ3RleHQnOifmgqjnoa7lrpropoHliKDpmaTov5nkuKrova7mkq3lm77lkJfvvJ8nLFxuICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAgICAgICAgICAgJ3VybCc6Jy9jbXMvZGVsZXRlX2Jhbm5lci8nLFxuICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFubmVyX2lkJzpiYW5uZXJJZFxuICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6L2u5pKt5Zu+5Yig6Zmk5oiQ5Yqf77yBJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRTYXZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoYmFubmVySXRlbSkge1xuICAgIHZhciBzYXZlQnRuID0gYmFubmVySXRlbS5maW5kKCcuc2F2ZS1idG4nKTtcbiAgICB2YXIgaW1hZ2VUYWcgPSBiYW5uZXJJdGVtLmZpbmQoJy50aHVtYm5haWwnKTtcbiAgICB2YXIgcHJpb3JpdHlUYWcgPSBiYW5uZXJJdGVtLmZpbmQoJ2lucHV0W25hbWU9XCJwcmlvcml0eVwiXScpO1xuICAgIHZhciBsaW5rdG9UYWcgPSBiYW5uZXJJdGVtLmZpbmQoJ2lucHV0W25hbWU9XCJsaW5rX3RvXCJdJyk7XG4gICAgdmFyIHByaW9yaXR5U3BhbiA9IGJhbm5lckl0ZW0uZmluZCgnc3BhbltjbGFzcz1cInByaW9yaXR5XCJdJyk7XG4gICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcpO1xuXG4gICAgdmFyIHVybCA9ICcnO1xuICAgIGlmKGJhbm5lcklkKXtcbiAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9iYW5uZXIvJztcbiAgICB9ZWxzZSB7XG4gICAgICAgIHVybCA9ICcvY21zL2FkZF9iYW5uZXIvJztcbiAgICB9XG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbWFnZV91cmwgPSBpbWFnZVRhZy5hdHRyKCdzcmMnKTtcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdHlUYWcudmFsKCk7XG4gICAgICAgIHZhciBsaW5rX3RvID0gbGlua3RvVGFnLnZhbCgpO1xuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6dXJsLFxuICAgICAgICAgICAgJ2RhdGEnOntcbiAgICAgICAgICAgICAgICAnaW1hZ2VfdXJsJzppbWFnZV91cmwsXG4gICAgICAgICAgICAgICAgJ3ByaW9yaXR5Jzpwcmlvcml0eSxcbiAgICAgICAgICAgICAgICAnbGlua190byc6bGlua190byxcbiAgICAgICAgICAgICAgICAnaWQnOmJhbm5lcklkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhbm5lcklkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKCfova7mkq3lm77kv67mlLnlrozmiJDvvIEnKTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJZCA9IHJlc3VsdFsnZGF0YSddWydiYW5uZXJfaWQnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnLGJhbm5lcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKCfova7mkq3lm77mt7vliqDlrozmiJDvvIEnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eVNwYW4udGV4dCgn5LyY5YWI57qn77yaJytwcmlvcml0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuQmFubmVycy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubGlzdGVuQmFubmVyc0V2ZW50KCk7XG4gICAgdGhpcy5sb2FkRGF0YSgpO1xufTtcblxuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFubmVycyA9IG5ldyBCYW5uZXJzKCk7XG4gICAgYmFubmVycy5ydW4oKTtcbn0pOyJdfQ==
