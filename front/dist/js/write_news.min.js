function News(){}News.prototype.listenUploadFilelEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){var e=t.data.url;$("#thumbnail-form").val(e),console.log(t)}}})})},News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$(this).attr("data-news-id"),n=$('input[name="title"]').val(),i=$('select[name="category"]').val(),a=$('input[name="desc"]').val(),o=$('input[name="thumbnail"]').val(),l=window.ue.getContent(),s="";s=e?"/cms/edit_news/":"/cms/write_news/",xfzajax.post({url:s,data:{title:n,category:i,desc:a,thumbnail:o,content:l,news_id:e},success:function(t){200===t.code&&(e?xfzalert.alertSuccess("恭喜！新闻修改成功！",function(){window.location.reload()}):xfzalert.alertSuccess("恭喜！新闻发表成功！",function(){window.location.reload()}))}})})},News.prototype.run=function(){var t=this;t.listenUploadFilelEvent(),t.initUEditor(),t.listenSubmitEvent()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImxpc3RlblVwbG9hZEZpbGVsRXZlbnQiLCJ1cGxvYWRCdG4iLCIkIiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwidmFsIiwiY29uc29sZSIsImxvZyIsImluaXRVRWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblN1Ym1pdEV2ZW50IiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwibmV3c19pZCIsInRoaXMiLCJhdHRyIiwidGl0bGUiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsInhmemFsZXJ0IiwiYWxlcnRTdWNjZXNzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJydW4iLCJzZWxmIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxRQU1UQSxLQUFLQyxVQUFVQyx1QkFBeUIsV0FDcEMsSUFBSUMsRUFBWUMsRUFBRSxrQkFDbEJELEVBQVVFLE9BQU8sV0FDYixJQUFJQyxFQUFPSCxFQUFVLEdBQUdJLE1BQU0sR0FDMUJDLEVBQVcsSUFBSUMsU0FDbkJELEVBQVNFLE9BQU8sT0FBT0osR0FDdkJLLFFBQVFDLEtBQUssQ0FDVEMsSUFBTyxvQkFDUEMsS0FBUU4sRUFDUk8sYUFBZSxFQUNmQyxhQUFlLEVBQ2ZDLFFBQVcsU0FBVUMsR0FDakIsR0FBc0IsTUFBbkJBLEVBQWEsS0FBVSxDQUN0QixJQUFJTCxFQUFNSyxFQUFhLEtBQU8sSUFDVGQsRUFBRSxtQkFDUmUsSUFBSU4sR0FDbkJPLFFBQVFDLElBQUlILFVBUWhDbEIsS0FBS0MsVUFBVXFCLFlBQWMsV0FDekJDLE9BQU9DLEdBQUtDLEdBQUdDLFVBQVUsU0FBUyxDQUM5QkMsbUJBQXNCLElBQ3RCQyxVQUFhLHNCQUtyQjVCLEtBQUtDLFVBQVU0QixrQkFBb0IsV0FDZnpCLEVBQUUsZUFDUjBCLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUVOLElBQ0lDLEVBRE03QixFQUFFOEIsTUFDTUMsS0FBSyxnQkFFbkJDLEVBQVFoQyxFQUFFLHVCQUF1QmUsTUFDakNrQixFQUFXakMsRUFBRSwyQkFBMkJlLE1BQ3hDbUIsRUFBT2xDLEVBQUUsc0JBQXNCZSxNQUMvQm9CLEVBQVluQyxFQUFFLDJCQUEyQmUsTUFDekNxQixFQUFVakIsT0FBT0MsR0FBR2lCLGFBRXBCNUIsRUFBTSxHQUVGQSxFQUREb0IsRUFDTyxrQkFFQSxtQkFHZHRCLFFBQVFDLEtBQUssQ0FDVkMsSUFBTUEsRUFDTkMsS0FBTyxDQUNIc0IsTUFBUUEsRUFDUkMsU0FBV0EsRUFDWEMsS0FBT0EsRUFDUEMsVUFBWUEsRUFDWkMsUUFBVUEsRUFDVlAsUUFBVUEsR0FFYmhCLFFBQVUsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxPQUNUZSxFQUNDUyxTQUFTQyxhQUFhLGFBQWEsV0FDbkNwQixPQUFPcUIsU0FBU0MsV0FHaEJILFNBQVNDLGFBQWEsYUFBYSxXQUNuQ3BCLE9BQU9xQixTQUFTQyxrQkFVeEM3QyxLQUFLQyxVQUFVNkMsSUFBTSxXQUNqQixJQUFJQyxFQUFPYixLQUNYYSxFQUFLN0MseUJBQ0w2QyxFQUFLekIsY0FDTHlCLEVBQUtsQixxQkFJVHpCLEVBQUUsWUFDYSxJQUFJSixNQUNWOEMiLCJmaWxlIjoid3JpdGVfbmV3cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBOZXdzKCkge1xuXG59XG5cblxuLy8g5LiK5Lyg5paH5Lu2XG5OZXdzLnByb3RvdHlwZS5saXN0ZW5VcGxvYWRGaWxlbEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB1cGxvYWRCdG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsZmlsZSk7XG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoXCIjdGh1bWJuYWlsLWZvcm1cIik7XG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4vLyDlr4zmlofmnKznvJbovpHlmahcbk5ld3MucHJvdG90eXBlLmluaXRVRWRpdG9yID0gZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcignZWRpdG9yJyx7XG4gICAgICAgICdpbml0aWFsRnJhbWVIZWlnaHQnOiA0MDAsXG4gICAgICAgICdzZXJ2ZXJVcmwnOiAnL3VlZGl0b3IvdXBsb2FkLydcbiAgICB9KTtcbn07XG5cbi8vIOa3u+WKoOaWsOmXu1xuTmV3cy5wcm90b3R5cGUubGlzdGVuU3VibWl0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoJyNzdWJtaXQtYnRuJyk7XG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBidG4gPSAkKHRoaXMpO1xuICAgICAgICB2YXIgbmV3c19pZCA9IGJ0bi5hdHRyKCdkYXRhLW5ld3MtaWQnKTtcblxuICAgICAgICB2YXIgdGl0bGUgPSAkKCdpbnB1dFtuYW1lPVwidGl0bGVcIl0nKS52YWwoKTtcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gJCgnc2VsZWN0W25hbWU9XCJjYXRlZ29yeVwiXScpLnZhbCgpO1xuICAgICAgICB2YXIgZGVzYyA9ICQoJ2lucHV0W25hbWU9XCJkZXNjXCJdJykudmFsKCk7XG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKCdpbnB1dFtuYW1lPVwidGh1bWJuYWlsXCJdJykudmFsKCk7XG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcblxuICAgICAgICB2YXIgdXJsID0gJyc7XG4gICAgICAgICAgICBpZihuZXdzX2lkKXtcbiAgICAgICAgICAgICAgICB1cmwgPSAnL2Ntcy9lZGl0X25ld3MvJztcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICB1cmwgPSAnL2Ntcy93cml0ZV9uZXdzLyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgJ3VybCc6dXJsLFxuICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgJ3RpdGxlJzp0aXRsZSxcbiAgICAgICAgICAgICAgICdjYXRlZ29yeSc6Y2F0ZWdvcnksXG4gICAgICAgICAgICAgICAnZGVzYyc6ZGVzYyxcbiAgICAgICAgICAgICAgICd0aHVtYm5haWwnOnRodW1ibmFpbCxcbiAgICAgICAgICAgICAgICdjb250ZW50Jzpjb250ZW50LFxuICAgICAgICAgICAgICAgJ25ld3NfaWQnOm5ld3NfaWRcbiAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld3NfaWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKCfmga3llpzvvIHmlrDpl7vkv67mlLnmiJDlip/vvIEnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKCfmga3llpzvvIHmlrDpl7vlj5HooajmiJDlip/vvIEnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlblVwbG9hZEZpbGVsRXZlbnQoKTtcbiAgICBzZWxmLmluaXRVRWRpdG9yKCk7XG4gICAgc2VsZi5saXN0ZW5TdWJtaXRFdmVudCgpO1xufTtcblxuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmV3cyA9IG5ldyBOZXdzKCk7XG4gICAgbmV3cy5ydW4oKTtcbn0pOyJdfQ==
