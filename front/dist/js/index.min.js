function Banner(){this.bannerWitdh=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUL=$("#banner-ul"),this.liList=this.bannerUL.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn"),template.defaults.imports.timeSince=function(n){var e=new Date(n),t=e.getTime(),i=((new Date).getTime()-t)/1e3;return console.log(i),i<60?"刚刚":60<=i&&i<3600?(minutes=parseInt(i/60),minutes+"分钟前"):3600<=i&&i<86400?(hours=parseInt(i/60/60),hours+"小时前"):86400<=i&&i<2592e3?(days=parseInt(i/60/60/24),days+"天前"):e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay()+" "+e.getHours()+":"+e.getMinutes()}}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUL.append(e),n.bannerUL.prepend(t),n.bannerUL.css({width:n.bannerWitdh*(n.bannerCount+2),left:-n.bannerWitdh})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.animate=function(){var n=this;n.bannerUL.stop().animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUL.css({left:-n.bannerWitdh}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUL.css({left:-n.bannerCount*n.bannerWitdh}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUL.css({left:-n.bannerWitdh}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){console.log("鼠标移动,暂停播放..."),clearInterval(n.timer),n.toggleArrow(!0)},function(){console.log("鼠标移走,开始播放..."),n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n,t.animate()})})},Banner.prototype.run=function(){console.log("runing..........."),this.initBanner(),this.initPageControl(),this.loop(),this.listenArrowClick(),this.listenBannerHover(),this.listenPageControl()},$(function(){(new Banner).run()}),Index.prototype.listenLoadMoreEvent=function(){var i=this;i.page;i.loadBtn.click(function(){xfzajax.get({url:"/news/news_list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),i.page+=1}else window.messageBox.showError("已经没有更多新闻了！"),i.loadBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");xfzajax.get({url:"/news/news_list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var e=n.data,t=template("news-item",{newses:e}),i=$(".list-inner-group");i.empty(),i.append(t),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaXRkaCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVMIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInRlbXBsYXRlIiwiZGVmYXVsdHMiLCJpbXBvcnRzIiwidGltZVNpbmNlIiwiZGF0ZVZhbHVlIiwiZGF0ZSIsIkRhdGUiLCJkYXRldHMiLCJnZXRUaW1lIiwidGltZXN0YW1wIiwiY29uc29sZSIsImxvZyIsIm1pbnV0ZXMiLCJwYXJzZUludCIsImhvdXJzIiwiZGF5cyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXkiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJwcm90b3R5cGUiLCJpbml0QmFubmVyIiwiZmlyc3RCYW5uZXIiLCJlcSIsImNsb25lIiwibGFzdEJhbm5lciIsImFwcGVuZCIsInByZXBlbmQiLCJjc3MiLCJ3aWR0aCIsImxlZnQiLCJpbml0UGFnZUNvbnRyb2wiLCJpIiwiY2lyY2xlIiwiYWRkQ2xhc3MiLCJhbmltYXRlIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJ0b2dnbGVBcnJvdyIsImlzU2hvdyIsInNob3ciLCJoaWRlIiwibG9vcCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJsaXN0ZW5BcnJvd0NsaWNrIiwiY2xpY2siLCJsaXN0ZW5CYW5uZXJIb3ZlciIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsImxpc3RlblBhZ2VDb250cm9sIiwiZWFjaCIsIm9iaiIsInJ1biIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwidHBsIiwid2luZG93IiwibWVzc2FnZUJveCIsInNob3dFcnJvciIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJsaSIsImF0dHIiLCJuZXdzTGlzdEdyb3VwIiwiZW1wdHkiXSwibWFwcGluZ3MiOiJBQWNBLFNBQVNBLFNBQ0xDLEtBQUtDLFlBQWMsSUFDbkJELEtBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxLQUFLSSxNQUFRLEVBQ2JKLEtBQUtLLFVBQVlGLEVBQUUsZUFDbkJILEtBQUtNLFdBQWFILEVBQUUsZ0JBQ3BCSCxLQUFLTyxTQUFXSixFQUFFLGNBQ2xCSCxLQUFLUSxPQUFTUixLQUFLTyxTQUFTRSxTQUFTLE1BQ3JDVCxLQUFLVSxZQUFjVixLQUFLUSxPQUFPRyxPQUMvQlgsS0FBS1ksWUFBY1QsRUFBRSxpQkF1SnpCLFNBQVNVLFFBQ0wsSUFBSUMsRUFBT2QsS0FDWGMsRUFBS0MsS0FBTyxFQUNaRCxFQUFLRSxZQUFjLEVBQ25CRixFQUFLRyxRQUFVZCxFQUFFLGtCQUdqQmUsU0FBU0MsU0FBU0MsUUFBUUMsVUFBWSxTQUFVQyxHQUM1QyxJQUFJQyxFQUFPLElBQUlDLEtBQUtGLEdBQ2hCRyxFQUFTRixFQUFLRyxVQUVkQyxJQURRLElBQUtILE1BQVFFLFVBQ0FELEdBQVEsSUFFakMsT0FEQUcsUUFBUUMsSUFBSUYsR0FDVEEsRUFBWSxHQUNKLEtBRVUsSUFBYkEsR0FBbUJBLEVBQVksTUFDbkNHLFFBQVVDLFNBQVNKLEVBQVksSUFDeEJHLFFBQVEsT0FFRSxNQUFiSCxHQUFzQkEsRUFBWSxPQUN0Q0ssTUFBUUQsU0FBU0osRUFBWSxHQUFLLElBQzNCSyxNQUFNLE9BRUksT0FBYkwsR0FBeUJBLEVBQVksUUFDekNNLEtBQU9GLFNBQVNKLEVBQVksR0FBSyxHQUFLLElBQy9CTSxLQUFLLE1BRURWLEVBQUtXLGNBS0osSUFKQVgsRUFBS1ksV0FJSyxJQUhaWixFQUFLYSxTQUdlLElBRm5CYixFQUFLYyxXQUV1QixJQUQxQmQsRUFBS2UsY0FwTDlCdkMsT0FBT3dDLFVBQVVDLFdBQWEs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N0MsT0FBT3NDLEdBQ3JCckUsRUFBS0MsS0FBTyxFQUNaRCxFQUFLRSxZQUFjQSxFQUNuQndFLEVBQUduQyxTQUFTLFVBQVVHLFdBQVdDLFlBQVksVUFDN0MzQyxFQUFLRyxRQUFRMkMsY0FPakMvQyxNQUFNMEIsVUFBVWtDLElBQU0sV0FDUHpFLEtBQ04wRSxzQkFETTFFLEtBRU51Riw2QkFHVHBGLEVBQUUsWUFDYSxJQUFJVSxPQUNWNEQiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZnVuY3Rpb24gQmFubmVyKCkge1xuLy8gICAgIC8v44CA55u45b2T5LqOcHl0aG9u5Lit55qEX19pbml0X1/mlrnms5Vcbi8vICAgICBjb25zb2xlLmxvZygnYmFubmVyJyk7XG4vLyAgICAgdGhpcy5wZXJzaW9uID0gJ2hhb2dlJztcbi8vIH1cbi8vXG4vLyAvL+OAgOWOn+Wei+mTvuOAgO+8jeOAgOa3u+WKoOaWueazlVxuLy8gQmFubmVyLnByb3RvdHlwZS5ncmVldCA9IGZ1bmN0aW9uICh3b3JkKSB7XG4vLyAgICAgY29uc29sZS5sb2coJ2hlbGxvJyx3b3JkKTtcbi8vIH07XG4vL1xuLy8gdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcbi8vIGNvbnNvbGUubG9nKGJhbm5lci5wZXJzaW9uKTtcblxuZnVuY3Rpb24gQmFubmVyKCkge1xuICAgIHRoaXMuYmFubmVyV2l0ZGggPSA3OTg7XG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoJyNiYW5uZXItZ3JvdXAnKTsvL+iOt+WPluagh+etvuWvueixoVxuICAgIHRoaXMuaW5kZXggPSAxOy8v5Yid5aeL5YyW6L2u5pKt5Zu+57yW5Y+3XG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKCcubGVmdC1hcnJvdycpOy8v6L2u5pKt5Zu+5bem566t5aS0XG4gICAgdGhpcy5yaWdodEFycm93ID0gJCgnLnJpZ2h0LWFycm93Jyk7Ly/ova7mkq3lm77lj7Pnrq3lpLRcbiAgICB0aGlzLmJhbm5lclVMID0gJCgnI2Jhbm5lci11bCcpOy8v6I635Y+W5qCH562+XG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVMLmNoaWxkcmVuKCdsaScpOy8v6I635Y+WbGnmoIfnrb7lr7nosaFcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoOy8v6I635Y+WbGnmoIfnrb7kuKrmlbBcbiAgICB0aGlzLnBhZ2VDb250cm9sID0gJCgnLnBhZ2UtY29udHJvbCcpO1xufVxuXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIGZpcnN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoMCkuY2xvbmUoKTtcbiAgICB2YXIgbGFzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQtMSkuY2xvbmUoKTtcbiAgICBzZWxmLmJhbm5lclVMLmFwcGVuZChmaXJzdEJhbm5lcik7Ly8g5re75Yqg5Yiw5pyA5ZCO5LiA5LiqXG4gICAgc2VsZi5iYW5uZXJVTC5wcmVwZW5kKGxhc3RCYW5uZXIpOy8vIOa3u+WKoOWIsOesrOS4gOS4qlxuICAgIHNlbGYuYmFubmVyVUwuY3NzKHsnd2lkdGgnOnNlbGYuYmFubmVyV2l0ZGgqKHNlbGYuYmFubmVyQ291bnQrMiksXG4gICAgJ2xlZnQnOi1zZWxmLmJhbm5lcldpdGRofSk7Ly8g5Yqo5oCB5pu05pS55bCP5ZyG54K55qCH562+5a695bqmXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7Ly8g5Yqo5oCB5L+u5pS55bCP5ZyG54K55Liq5pWw77yd77yd6L2u5pKt5Zu+5Liq5pWwXG4gICAgLy92YXIgcGFnZUNvbnRyb2wgPSAkKCcucGFnZS1jb250cm9sJyk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHNlbGYuYmFubmVyQ291bnQ7IGkrKyl7XG4gICAgICAgIHZhciBjaXJjbGUgPSAkKCc8bGk+PC9saT4nKTtcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcbiAgICAgICAgaWYoaSA9PT0gMCl7XG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGYucGFnZUNvbnRyb2wuY3NzKHsnd2lkdGgnOnNlbGYuYmFubmVyQ291bnQqMTIrOCoyKzE2KihzZWxmLmJhbm5lckNvdW50LTEpfSlcbn07Ly8g5Yqo5oCB5L+u5pS55bCP5ZyG54K55aSW6YOoZGl25oC75a695bqmXG5cbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL+WwgeijhemAmueUqOWHveaVsCAtIOi9ruaSreWbvlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmJhbm5lclVMLnN0b3AoKS5hbmltYXRlKHsnbGVmdCc6LTc5OCpzZWxmLmluZGV4fSw1MDApO+OAgC8v44CA6L2u5pKtXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcbiAgICBpZihpbmRleCA9PT0gMCl7XG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudC0xO1xuICAgIH1lbHNlIGlmKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50KzEpe1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgfWVsc2V7XG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleC0xO1xuICAgIH1cbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7Ly8g5Yqo5oCB5om+5Yiw5omA5pyJ55qE5YWE5byf6IqC54K55bm256e76ZmkY2xhc3Ncbn07XG5cbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XG4gICAgLy/mjqfliLbova7mkq3lm77lt6blj7Pnrq3lpLTnmoTmmL7npLpcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKGlzU2hvdyl7XG4gICAgICAgIC8vICQoJy5sZWZ0LWFycm93JykudG9nZ2xlKCk7XG4gICAgICAgIC8vICQoJy5yaWdodC1hcnJvdycpLnRvZ2dsZSgpO1xuICAgICAgICAvLyAkKCcubGVmdC1hcnJvdycpLnNob3coKTtcbiAgICAgICAgLy8gJCgnLnJpZ2h0LWFycm93Jykuc2hvdygpO1xuICAgICAgICBzZWxmLmxlZnRBcnJvdy5zaG93KCk7XG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XG4gICAgfWVsc2V7XG4gICAgICAgIC8vICQoJy5sZWZ0LWFycm93JykuaGlkZSgpO1xuICAgICAgICAvLyAkKCcucmlnaHQtYXJyb3cnKS5oaWRlKCk7XG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcbiAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKTtcbiAgICB9XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIHZhciBiYW5uZXJVTCA9ICQoJyNiYW5uZXItdWwnKTtcblxuICAgIC8vIGJhbm5lclVMLmNzcyh7J2xlZnQnOi03OTh9KTtcbiAgICAvLyBiYW5uZXJVTC5hbmltYXRlKHsnbGVmdCc6LTc5OH0sNTAwKTsvL+S/ruaUuWNzc+aPkOS+m+i/h+W6puaViOaenFxuICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAvL+WumuaXtuWZqOWKn+iDvVxuICAgICAgICBpZiAoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lckNvdW50KzEpe1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJVTC5jc3MoeydsZWZ0Jzotc2VsZi5iYW5uZXJXaXRkaH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgLy8gYmFubmVyVUwuYW5pbWF0ZSh7J2xlZnQnOi03OTgqc2VsZi5pbmRleH0sNTAwKTtcbiAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgICAgICB9LDIwMDApOy8v6L2u5pKtXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy/nm5HlkKzova7mkq3lm77lt6blj7Pnrq3lpLTkuovku7ZcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihzZWxmLmluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVMLmNzcyh7J2xlZnQnOi1zZWxmLmJhbm5lckNvdW50KnNlbGYuYmFubmVyV2l0ZGh9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0pO1xuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgaWYoc2VsZi5pbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCArIDEpe1xuICAgICAgICAgICBzZWxmLmJhbm5lclVMLmNzcyh7J2xlZnQnOi1zZWxmLmJhbm5lcldpdGRofSk7XG4gICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xuICAgICAgIH1lbHNle1xuICAgICAgICAgICBzZWxmLmluZGV4Kys7XG4gICAgICAgfVxuICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL+ebkeWQrOm8oOagh+enu+WKqOWIsOi9ruaSreWbvuS6i+S7tlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+m8oOagh+enu+WKqCzmmoLlgZzmkq3mlL4uLi4nKTtcbiAgICAgICAgLy/nrKzkuIDkuKrlh73mlbDmmK/miorpvKDmoIfnp7vliqjliLBiYW5uZXLkuIrkvJrmiafooYznmoTlh73mlbBcbiAgICAgICAgLy8gY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsg5Ye95pWw5YaF55qEdGhpc+WvueixoeaMh+eahOaYr+WHveaVsOOAgOS4jeaYr++8omFubmVy5a+56LGhXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7Ly/lhbPpl63lrprml7blmahcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTsvL+aYvuekuui9ruaSreWbvuW3puWPs+eureWktFxuXG4gICAgfSxmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8v56ys5LqM5Liq5Ye95pWw5piv5oqK6byg5qCH5LuOYmFubmVy56e76LWw5Lya5omn6KGM55qE5Ye95pWwXG4gICAgICAgIGNvbnNvbGUubG9nKCfpvKDmoIfnp7votbAs5byA5aeL5pKt5pS+Li4uJyk7XG4gICAgICAgIHNlbGYubG9vcCgpO1xuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTsvL+makOiXj+i9ruaSreWbvuW3puWPs+eureWktFxuICAgIH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyDnm5HlkKxsaeagh+etvlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVhY2goZnVuY3Rpb24gKGluZGV4LG9iaikge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmRleCk744CA5qCH562+5LiL5qCH5YC8XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKG9iaik744CAbGnmoIfnrb5cbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgICAgICAgICAgLy8gJChvYmopLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsvLyDmib7liLDmiYDmnInnmoTlhYTlvJ/oioLngrnlubbnp7vpmaRjbGFzc1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCdydW5pbmcuLi4uLi4uLi4uLicpO1xuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XG4gICAgdGhpcy5sb29wKCk7XG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKCk7XG4gICAgdGhpcy5saXN0ZW5CYW5uZXJIb3ZlcigpOy8v55uR5ZCs6L2u5pKt5Zu+6byg5qCH5LqL5Lu2XG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcbiAgICBiYW5uZXIucnVuKCk7Ly/kuLvlkK/liqjlh73mlbBcbn0pO1xuXG4vLyAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIEluZGV4KCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZ2UgPSAyO1xuICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSAwO1xuICAgIHNlbGYubG9hZEJ0biA9ICQoJyNsb2FkLW1vcmUtYnRuJyk7XG5cbiAgICAvLyDlpITnkIbmlrDpl7vmt7vliqDml7bpl7TmmL7npLrmoLzlvI9cbiAgICB0ZW1wbGF0ZS5kZWZhdWx0cy5pbXBvcnRzLnRpbWVTaW5jZSA9IGZ1bmN0aW9uIChkYXRlVmFsdWUpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xuICAgICAgICB2YXIgZGF0ZXRzID0gZGF0ZS5nZXRUaW1lKCk7IC8vIOW+l+WIsOeahOaYr+avq+enkueahOaXtumXtOaIs1xuICAgICAgICB2YXIgbm93dHMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpOyAvLyDlvpfliLDnmoTmmK/lvZPliY3ml7bpl7TnmoTml7bpl7TmiLNcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3d0cyAtIGRhdGV0cykvMTAwMDtcbiAgICAgICAgY29uc29sZS5sb2codGltZXN0YW1wKTtcbiAgICAgICAgaWYodGltZXN0YW1wIDwgNjApIHtcbiAgICAgICAgICAgIHJldHVybiAn5Yia5YiaJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHRpbWVzdGFtcCA+PSA2MCAmJiB0aW1lc3RhbXAgPCA2MCo2MCkge1xuICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKTtcbiAgICAgICAgICAgIHJldHVybiBtaW51dGVzKyfliIbpkp/liY0nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KSB7XG4gICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjApO1xuICAgICAgICAgICAgcmV0dXJuIGhvdXJzKyflsI/ml7bliY0nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwKjI0ICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKSB7XG4gICAgICAgICAgICBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCAvIDI0KTtcbiAgICAgICAgICAgIHJldHVybiBkYXlzKyflpKnliY0nO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgICAgICByZXR1cm4geWVhcisnLycrbW9udGgrJy8nK2RheSsnICcraG91cisnOicrbWludXRlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyDpppbpobXmlrDpl7vngrnlh7vliqDovb3mm7TlpJpcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcGFnZSA9IHNlbGYucGFnZTtcbiAgICBzZWxmLmxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL25ld3NfbGlzdC8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnBhZ2UsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzpzZWxmLmNhdGVnb3J5X2lkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICBpZihuZXdzZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ25ld3MtaXRlbScsIHsnbmV3c2VzJzogbmV3c2VzfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKCcubGlzdC1pbm5lci1ncm91cCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKCflt7Lnu4/msqHmnInmm7TlpJrmlrDpl7vkuobvvIEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuLy8g5a6e546w6aaW6aG154K55Ye75YiG57G75YiH5o2iXG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRhYkdyb3VwID0gJChcIi5saXN0LXRhYlwiKTtcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gdGhpc++8muS7o+ihqOW9k+WJjemAieS4reeahOi/meS4qmxp5qCH562+XG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpO1xuICAgICAgICB2YXIgcGFnZSA9IDE7XG4gICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbmV3c19saXN0LycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBjYXRlZ29yeV9pZCxcbiAgICAgICAgICAgICAgICAncCc6IHBhZ2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIix7XCJuZXdzZXNcIjpuZXdzZXN9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZW1wdHnvvJrlj6/ku6XlsIbov5nkuKrmoIfnrb7kuIvnmoTmiYDmnInlrZDlhYPntKDpg73liKDmjolcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NMaXN0R3JvdXAgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubGlzdGVuTG9hZE1vcmVFdmVudCgpO1xuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcbiAgIGluZGV4LnJ1bigpO1xufSk7Il19
