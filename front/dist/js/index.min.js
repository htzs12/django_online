function Banner(){this.bannerWitdh=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUL=$("#banner-ul"),this.liList=this.bannerUL.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUL.append(e),n.bannerUL.prepend(t),n.bannerUL.css({width:n.bannerWitdh*(n.bannerCount+2),left:-n.bannerWitdh})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.animate=function(){var n=this;n.bannerUL.stop().animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUL.css({left:-n.bannerWitdh}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUL.css({left:-n.bannerCount*n.bannerWitdh}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUL.css({left:-n.bannerWitdh}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){console.log("鼠标移动,暂停播放..."),clearInterval(n.timer),n.toggleArrow(!0)},function(){console.log("鼠标移走,开始播放..."),n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n,t.animate()})})},Banner.prototype.run=function(){console.log("runing..........."),this.initBanner(),this.initPageControl(),this.loop(),this.listenArrowClick(),this.listenBannerHover(),this.listenPageControl()},$(function(){(new Banner).run()}),Index.prototype.listenLoadMoreEvent=function(){var i=this;i.page;i.loadBtn.click(function(){xfzajax.get({url:"/news/news_list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),i.page+=1}else window.messageBox.showError("已经没有更多新闻了！"),i.loadBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");xfzajax.get({url:"/news/news_list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var e=n.data,t=template("news-item",{newses:e}),i=$(".list-inner-group");i.empty(),i.append(t),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaXRkaCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVMIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsImFuaW1hdGUiLCJzdG9wIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjb25zb2xlIiwibG9nIiwiY2xlYXJJbnRlcnZhbCIsImxpc3RlblBhZ2VDb250cm9sIiwiZWFjaCIsIm9iaiIsInJ1biIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwidHBsIiwidGVtcGxhdGUiLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0Vycm9yIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsImxpIiwiYXR0ciIsIm5ld3NMaXN0R3JvdXAiLCJlbXB0eSJdLCJtYXBwaW5ncyI6IkFBY0EsU0FBU0EsU0FDTEMsS0FBS0MsWUFBYyxJQUNuQkQsS0FBS0UsWUFBY0MsRUFBRSxpQkFDckJILEtBQUtJLE1B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S25FLEVBQUVILE1BQ1BnQixFQUFjc0QsRUFBR0MsS0FBSyxpQkFFMUJmLFFBQVFDLElBQUksQ0FDUkMsSUFBTyxtQkFDUEMsS0FBUSxDQUNKM0MsWUFBZUEsRUFDZjRDLEVBTEcsR0FPUEMsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlDLEVBQVNELEVBQWEsS0FDdEJFLEVBQU1DLFNBQVMsWUFBWSxDQUFDRixPQUFTQSxJQUVyQ1MsRUFBZ0JyRSxFQUFFLHFCQUN0QnFFLEVBQWNDLFFBQ2RELEVBQWNoRCxPQUFPd0MsR0FDckJsRCxFQUFLQyxLQUFPLEVBQ1pELEVBQUtFLFlBQWNBLEVBQ25Cc0QsRUFBR3RDLFNBQVMsVUFBVUcsV0FBV0MsWUFBWSxVQUM3Q3RCLEVBQUtHLFFBQVFzQixjQVFqQzFCLE1BQU1LLFVBQVVvQyxJQUFNLFdBQ1B0RCxLQUNOdUQsc0JBRE12RCxLQUVOcUUsNkJBR1RsRSxFQUFFLFlBQ2EsSUFBSVUsT0FDVnlDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGZ1bmN0aW9uIEJhbm5lcigpIHtcbi8vICAgICAvL+OAgOebuOW9k+S6jnB5dGhvbuS4reeahF9faW5pdF9f5pa55rOVXG4vLyAgICAgY29uc29sZS5sb2coJ2Jhbm5lcicpO1xuLy8gICAgIHRoaXMucGVyc2lvbiA9ICdoYW9nZSc7XG4vLyB9XG4vL1xuLy8gLy/jgIDljp/lnovpk77jgIDvvI3jgIDmt7vliqDmlrnms5Vcbi8vIEJhbm5lci5wcm90b3R5cGUuZ3JlZXQgPSBmdW5jdGlvbiAod29yZCkge1xuLy8gICAgIGNvbnNvbGUubG9nKCdoZWxsbycsd29yZCk7XG4vLyB9O1xuLy9cbi8vIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XG4vLyBjb25zb2xlLmxvZyhiYW5uZXIucGVyc2lvbik7XG5cbmZ1bmN0aW9uIEJhbm5lcigpIHtcbiAgICB0aGlzLmJhbm5lcldpdGRoID0gNzk4O1xuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKCcjYmFubmVyLWdyb3VwJyk7Ly/ojrflj5bmoIfnrb7lr7nosaFcbiAgICB0aGlzLmluZGV4ID0gMTsvL+WIneWni+WMlui9ruaSreWbvue8luWPt1xuICAgIHRoaXMubGVmdEFycm93ID0gJCgnLmxlZnQtYXJyb3cnKTsvL+i9ruaSreWbvuW3pueureWktFxuICAgIHRoaXMucmlnaHRBcnJvdyA9ICQoJy5yaWdodC1hcnJvdycpOy8v6L2u5pKt5Zu+5Y+z566t5aS0XG4gICAgdGhpcy5iYW5uZXJVTCA9ICQoJyNiYW5uZXItdWwnKTsvL+iOt+WPluagh+etvlxuICAgIHRoaXMubGlMaXN0ID0gdGhpcy5iYW5uZXJVTC5jaGlsZHJlbignbGknKTsvL+iOt+WPlmxp5qCH562+5a+56LGhXG4gICAgdGhpcy5iYW5uZXJDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDsvL+iOt+WPlmxp5qCH562+5Liq5pWwXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoJy5wYWdlLWNvbnRyb2wnKTtcbn1cblxuQmFubmVyLnByb3RvdHlwZS5pbml0QmFubmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50LTEpLmNsb25lKCk7XG4gICAgc2VsZi5iYW5uZXJVTC5hcHBlbmQoZmlyc3RCYW5uZXIpOy8vIOa3u+WKoOWIsOacgOWQjuS4gOS4qlxuICAgIHNlbGYuYmFubmVyVUwucHJlcGVuZChsYXN0QmFubmVyKTsvLyDmt7vliqDliLDnrKzkuIDkuKpcbiAgICBzZWxmLmJhbm5lclVMLmNzcyh7J3dpZHRoJzpzZWxmLmJhbm5lcldpdGRoKihzZWxmLmJhbm5lckNvdW50KzIpLFxuICAgICdsZWZ0Jzotc2VsZi5iYW5uZXJXaXRkaH0pOy8vIOWKqOaAgeabtOaUueWwj+WchueCueagh+etvuWuveW6plxufTtcblxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzOy8vIOWKqOaAgeS/ruaUueWwj+WchueCueS4quaVsO+8ne+8nei9ruaSreWbvuS4quaVsFxuICAgIC8vdmFyIHBhZ2VDb250cm9sID0gJCgnLnBhZ2UtY29udHJvbCcpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzZWxmLmJhbm5lckNvdW50OyBpKyspe1xuICAgICAgICB2YXIgY2lyY2xlID0gJCgnPGxpPjwvbGk+Jyk7XG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XG4gICAgICAgIGlmKGkgPT09IDApe1xuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7J3dpZHRoJzpzZWxmLmJhbm5lckNvdW50KjEyKzgqMisxNiooc2VsZi5iYW5uZXJDb3VudC0xKX0pXG59Oy8vIOWKqOaAgeS/ruaUueWwj+WchueCueWklumDqGRpduaAu+WuveW6plxuXG5cbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL+WwgeijhemAmueUqOWHveaVsCAtIOi9ruaSreWbvlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmJhbm5lclVMLnN0b3AoKS5hbmltYXRlKHsnbGVmdCc6LTc5OCpzZWxmLmluZGV4fSw1MDApO+OAgC8v44CA6L2u5pKtXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcbiAgICBpZihpbmRleCA9PT0gMCl7XG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudC0xO1xuICAgIH1lbHNlIGlmKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50KzEpe1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgfWVsc2V7XG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleC0xO1xuICAgIH1cbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7Ly8g5Yqo5oCB5om+5Yiw5omA5pyJ55qE5YWE5byf6IqC54K55bm256e76ZmkY2xhc3Ncbn07XG5cbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XG4gICAgLy/mjqfliLbova7mkq3lm77lt6blj7Pnrq3lpLTnmoTmmL7npLpcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKGlzU2hvdyl7XG4gICAgICAgIC8vICQoJy5sZWZ0LWFycm93JykudG9nZ2xlKCk7XG4gICAgICAgIC8vICQoJy5yaWdodC1hcnJvdycpLnRvZ2dsZSgpO1xuICAgICAgICAvLyAkKCcubGVmdC1hcnJvdycpLnNob3coKTtcbiAgICAgICAgLy8gJCgnLnJpZ2h0LWFycm93Jykuc2hvdygpO1xuICAgICAgICBzZWxmLmxlZnRBcnJvdy5zaG93KCk7XG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XG4gICAgfWVsc2V7XG4gICAgICAgIC8vICQoJy5sZWZ0LWFycm93JykuaGlkZSgpO1xuICAgICAgICAvLyAkKCcucmlnaHQtYXJyb3cnKS5oaWRlKCk7XG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcbiAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKTtcbiAgICB9XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIHZhciBiYW5uZXJVTCA9ICQoJyNiYW5uZXItdWwnKTtcblxuICAgIC8vIGJhbm5lclVMLmNzcyh7J2xlZnQnOi03OTh9KTtcbiAgICAvLyBiYW5uZXJVTC5hbmltYXRlKHsnbGVmdCc6LTc5OH0sNTAwKTsvL+S/ruaUuWNzc+aPkOS+m+i/h+W6puaViOaenFxuICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAvL+WumuaXtuWZqOWKn+iDvVxuICAgICAgICBpZiAoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lckNvdW50KzEpe1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJVTC5jc3MoeydsZWZ0Jzotc2VsZi5iYW5uZXJXaXRkaH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgLy8gYmFubmVyVUwuYW5pbWF0ZSh7J2xlZnQnOi03OTgqc2VsZi5pbmRleH0sNTAwKTtcbiAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgICAgICB9LDIwMDApOy8v6L2u5pKtXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy/nm5HlkKzova7mkq3lm77lt6blj7Pnrq3lpLTkuovku7ZcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihzZWxmLmluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVMLmNzcyh7J2xlZnQnOi1zZWxmLmJhbm5lckNvdW50KnNlbGYuYmFubmVyV2l0ZGh9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0pO1xuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgaWYoc2VsZi5pbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCArIDEpe1xuICAgICAgICAgICBzZWxmLmJhbm5lclVMLmNzcyh7J2xlZnQnOi1zZWxmLmJhbm5lcldpdGRofSk7XG4gICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xuICAgICAgIH1lbHNle1xuICAgICAgICAgICBzZWxmLmluZGV4Kys7XG4gICAgICAgfVxuICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL+ebkeWQrOm8oOagh+enu+WKqOWIsOi9ruaSreWbvuS6i+S7tlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+m8oOagh+enu+WKqCzmmoLlgZzmkq3mlL4uLi4nKTtcbiAgICAgICAgLy/nrKzkuIDkuKrlh73mlbDmmK/miorpvKDmoIfnp7vliqjliLBiYW5uZXLkuIrkvJrmiafooYznmoTlh73mlbBcbiAgICAgICAgLy8gY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsg5Ye95pWw5YaF55qEdGhpc+WvueixoeaMh+eahOaYr+WHveaVsOOAgOS4jeaYr++8omFubmVy5a+56LGhXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7Ly/lhbPpl63lrprml7blmahcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTsvL+aYvuekuui9ruaSreWbvuW3puWPs+eureWktFxuXG4gICAgfSxmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8v56ys5LqM5Liq5Ye95pWw5piv5oqK6byg5qCH5LuOYmFubmVy56e76LWw5Lya5omn6KGM55qE5Ye95pWwXG4gICAgICAgIGNvbnNvbGUubG9nKCfpvKDmoIfnp7votbAs5byA5aeL5pKt5pS+Li4uJyk7XG4gICAgICAgIHNlbGYubG9vcCgpO1xuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTsvL+makOiXj+i9ruaSreWbvuW3puWPs+eureWktFxuICAgIH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyDnm5HlkKxsaeagh+etvlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVhY2goZnVuY3Rpb24gKGluZGV4LG9iaikge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmRleCk744CA5qCH562+5LiL5qCH5YC8XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKG9iaik744CAbGnmoIfnrb5cbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgICAgICAgICAgLy8gJChvYmopLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsvLyDmib7liLDmiYDmnInnmoTlhYTlvJ/oioLngrnlubbnp7vpmaRjbGFzc1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCdydW5pbmcuLi4uLi4uLi4uLicpO1xuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XG4gICAgdGhpcy5sb29wKCk7XG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKCk7XG4gICAgdGhpcy5saXN0ZW5CYW5uZXJIb3ZlcigpOy8v55uR5ZCs6L2u5pKt5Zu+6byg5qCH5LqL5Lu2XG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcbiAgICBiYW5uZXIucnVuKCk7Ly/kuLvlkK/liqjlh73mlbBcbn0pO1xuXG4vLyAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuZnVuY3Rpb24gSW5kZXgoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYucGFnZSA9IDI7XG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XG4gICAgc2VsZi5sb2FkQnRuID0gJChcIiNsb2FkLW1vcmUtYnRuXCIpO1xufVxuXG4vLyDpppbpobXmlrDpl7vngrnlh7vliqDovb3mm7TlpJpcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcGFnZSA9IHNlbGYucGFnZTtcbiAgICBzZWxmLmxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL25ld3NfbGlzdC8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnBhZ2UsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzpzZWxmLmNhdGVnb3J5X2lkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICBpZihuZXdzZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ25ld3MtaXRlbScsIHsnbmV3c2VzJzogbmV3c2VzfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKCcubGlzdC1pbm5lci1ncm91cCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKCflt7Lnu4/msqHmnInmm7TlpJrmlrDpl7vkuobvvIEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuLy8g5a6e546w6aaW6aG154K55Ye75YiG57G75YiH5o2iXG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHRhYkdyb3VwID0gJChcIi5saXN0LXRhYlwiKTtcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gdGhpc++8muS7o+ihqOW9k+WJjemAieS4reeahOi/meS4qmxp5qCH562+XG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpO1xuICAgICAgICB2YXIgcGFnZSA9IDE7XG4gICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbmV3c19saXN0LycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBjYXRlZ29yeV9pZCxcbiAgICAgICAgICAgICAgICAncCc6IHBhZ2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIix7XCJuZXdzZXNcIjpuZXdzZXN9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZW1wdHnvvJrlj6/ku6XlsIbov5nkuKrmoIfnrb7kuIvnmoTmiYDmnInlrZDlhYPntKDpg73liKDmjolcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NMaXN0R3JvdXAgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuSW5kZXgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5Mb2FkTW9yZUV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KCk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgIHZhciBpbmRleCA9IG5ldyBJbmRleCgpO1xuICAgaW5kZXgucnVuKCk7XG59KTsiXX0=
