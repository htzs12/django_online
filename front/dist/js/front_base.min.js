function FrontBase(){}function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper")}FrontBase.prototype.run=function(){this.listenAuthBoxHover()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenSignupEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptchaEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),a=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),a.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.smsSuccessEvent=function(){var t=this,n=$(".sms-captcha-btn");messageBox.showSuccess("短信验证码发送成功！"),n.addClass("disabled");var e=60;n.unbind("click");var a=setInterval(function(){n.text(e+"s"),(e-=1)<=0&&(clearInterval(a),n.removeClass("disabled"),n.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,t=$(".sms-captcha-btn"),e=$(".signup-group input[name='telephone']");t.click(function(){var t=e.val();t||messageBox.showInfo("请输入手机号码！"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code&&n.smsSuccessEvent()},fail:function(t){console.log(t)}})})},Auth.prototype.listenSigninEvent=function(){var a=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),i=t.find("input[name='password']"),o=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=i.val(),e=o.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){a.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSignupEvent=function(){var f=$(".signup-group");f.find(".submit-btn").click(function(t){t.preventDefault();var n=f.find("input[name='telephone']"),e=f.find("input[name='username']"),a=f.find("input[name='img_captcha']"),s=f.find("input[name='password1']"),i=f.find("input[name='password2']"),o=f.find("input[name='sms_captcha']"),c=n.val(),r=e.val(),p=a.val(),u=s.val(),l=i.val(),h=o.val();xfzajax.post({url:"/account/register/",data:{telephone:c,username:r,img_captcha:p,password1:u,password2:l,sms_captcha:h},success:function(t){window.location.reload()}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t);console.log(t);var e=n.getTime(),a=((new Date).getTime()-e)/1e3;return a<60?"刚刚":60<=a&&a<3600?(minutes=parseInt(a/60),minutes+"分钟前"):3600<=a&&a<86400?(hours=parseInt(a/60/60),hours+"小时前"):86400<=a&&a<2592e3?(days=parseInt(a/60/60/24),days+"天前"):n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+" "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwicHJvdG90eXBlIiwicnVuIiwibGlzdGVuQXV0aEJveEhvdmVyIiwiYXV0aEJveCIsInVzZXJNb3JlQm94IiwiaG92ZXIiLCJzaG93IiwiaGlkZSIsInNlbGYiLCJsaXN0ZW5TaG93SGlkZUV2ZW50IiwibGlzdGVuU3dpdGNoRXZlbnQiLCJsaXN0ZW5TaWduaW5FdmVudCIsImxpc3RlblNpZ251cEV2ZW50IiwibGlzdGVuSW1nQ2FwdGNoYUV2ZW50IiwibGlzdGVuU21zQ2FwdGNoYUV2ZW50Iiwic2hvd0V2ZW50IiwiaGlkZUV2ZW50Iiwic2lnbmluQnRuIiwic2lnbnVwQnRuIiwiY2xvc2VCdG4iLCJjbGljayIsImNzcyIsImxlZnQiLCJjdXJyZW50TGVmdCIsInBhcnNlSW50IiwiYW5pbWF0ZSIsImltZ0NhcHRjaGEiLCJhdHRyIiwiTWF0aCIsInJhbmRvbSIsInNtc1N1Y2Nlc3NFdmVudCIsInNtc0NhcHRjaGEiLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJhZGRDbGFzcyIsImNvdW50IiwidW5iaW5kIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInRleHQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQ2xhc3MiLCJ0ZWxlcGhvbmVJbnB1dCIsInRlbGVwaG9uZSIsInZhbCIsInNob3dJbmZvIiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0IiwiZmFpbCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInNpZ25pbkdyb3VwIiwiZmluZCIsInBhc3N3b3JkSW5wdXQiLCJyZW1lbWJlcklucHV0IiwicGFzc3dvcmQiLCJyZW1lbWJlciIsInByb3AiLCJwb3N0Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJzaWdudXBHcm91cCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ1c2VybmFtZUlucHV0IiwiaW1nQ2FwdGNoYUlucHV0IiwicGFzc3dvcmQxSW5wdXQiLCJwYXNzd29yZDJJbnB1dCIsInNtc0NhcHRjaGFJbnB1dCIsInVzZXJuYW1lIiwiaW1nX2NhcHRjaGEiLCJwYXNzd29yZDEiLCJwYXNzd29yZDIiLCJzbXNfY2FwdGNoYSIsInRlbXBsYXRlIiwiZGVmYXVsdHMiLCJpbXBvcnRzIiwidGltZVNpbmNlIiwiZGF0ZVZhbHVlIiwiZGF0ZSIsIkRhdGUiLCJkYXRldHMiLCJnZXRUaW1lIiwidGltZXN0YW1wIiwibWludXRlcyIsImhvdXJzIiwiZGF5cyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXkiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiXSwibWFwcGluZ3MiOiJBQUVBLFNBQVNBLGFBZ0RULFNBQVNDLE9BQ01DLEtBQ05DLFlBQWNDLEVBQUUsaUJBRFZGLEtBRU5HLGNBQWdCRCxFQUFFLG1CQS9DM0JKLFVBQVVNLFVBQVVDLElBQU0sV0FDWEwsS0FDTk0sc0JBSVRSLFVBQVVNLFVBQVVFLG1CQUFxQixXQUNyQyxJQUFJQyxFQUFVTCxFQUFFLGFBQ1pNLEVBQWNOLEVBQUUsa0JBQ3BCSyxFQUFRRSxNQUFNLFdBQ1ZELEVBQVlFLFFBQ1YsV0FDRkYsRUFBWUcsVUFzQ3BCWixLQUFLSyxVQUFVQyxJQUFNLFdBQ2pCLElBQUlPLEVBQU9aLEtBQ1hZLEVBQUtDLHNCQUNMRCxFQUFLRSxvQkFDTEYsRUFBS0csb0JBQ0xILEVBQUtJLG9CQUNMSixFQUFLSyx3QkFDTEwsRUFBS00seUJBR1RuQixLQUFLSyxVQUFVZSxVQUFZLFdBQ1puQixLQUNOQyxZQUFZUyxRQUdyQlgsS0FBS0ssVUFBVWdCLFVBQVksV0FDWnBCLEtBQ05DLFlBQVlVLFFBSXJCWixLQUFLSyxVQUFVUyxvQkFBc0IsV0FDakMsSUFBSUQsRUFBT1osS0FDUHFCLEVBQVluQixFQUFFLGVBQ2RvQixFQUFZcEIsRUFBRSxlQUNkcUIsRUFBV3JCLEVBQUUsY0FDakJtQixFQUFV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UUFBUWlCLEtBQUssQ0FDVGYsSUFBTyxxQkFDUEMsS0FBUSxDQUNKTixVQUFhQSxFQUNiZ0MsU0FBWUEsRUFDWkMsWUFBZUEsRUFDZkMsVUFBYUEsRUFDYkMsVUFBYUEsRUFDYkMsWUFBZUEsR0FFbkI3QixRQUFXLFNBQVVDLEdBQ2pCYSxPQUFPQyxTQUFTQyxlQU1oQ3BFLEVBQUUsWUFDWSxJQUFJSCxNQUNWTSxRQUdSSCxFQUFFLFlBQ2lCLElBQUlKLFdBQ1ZPLFFBSWJILEVBQUUsV0FDS2tFLE9BQU9nQixXQUNOQSxTQUFTQyxTQUFTQyxRQUFRQyxVQUFZLFNBQVVDLEdBQzVDLElBQUlDLEVBQU8sSUFBSUMsS0FBS0YsR0FDcEI5QixRQUFRQyxJQUFJNkIsR0FDWixJQUFJRyxFQUFTRixFQUFLRyxVQUVkQyxJQURRLElBQUtILE1BQVFFLFVBQ0FELEdBQVEsSUFDakMsT0FBR0UsRUFBWSxHQUNKLEtBRVUsSUFBYkEsR0FBbUJBLEVBQVksTUFDbkNDLFFBQVVsRSxTQUFTaUUsRUFBWSxJQUN4QkMsUUFBUSxPQUVFLE1BQWJELEdBQXNCQSxFQUFZLE9BQ3RDRSxNQUFRbkUsU0FBU2lFLEVBQVksR0FBSyxJQUMzQkUsTUFBTSxPQUVJLE9BQWJGLEdBQXlCQSxFQUFZLFFBQ3pDRyxLQUFPcEUsU0FBU2lFLEVBQVksR0FBSyxHQUFLLElBQy9CRyxLQUFPLE1BRUhQLEVBQUtRLGNBS0osSUFKQVIsRUFBS1MsV0FJSyxJQUhaVCxFQUFLVSxTQUdlLElBRm5CVixFQUFLVyxXQUV1QixJQUQxQlgsRUFBS1kiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIOWkhOeQhuWvvOiIquadoVxuZnVuY3Rpb24gRnJvbnRCYXNlKCkge1xuXG59XG5cbkZyb250QmFzZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlbkF1dGhCb3hIb3ZlcigpO1xufTtcblxuXG5Gcm9udEJhc2UucHJvdG90eXBlLmxpc3RlbkF1dGhCb3hIb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXV0aEJveCA9ICQoJy5hdXRoLWJveCcpO1xuICAgIHZhciB1c2VyTW9yZUJveCA9ICQoJy51c2VyLW1vcmUtYm94Jyk7XG4gICAgYXV0aEJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVzZXJNb3JlQm94LnNob3coKTtcbiAgICAgICAgfSxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVzZXJNb3JlQm94LmhpZGUoKTtcbiAgICB9KTtcbn07XG5cblxuLy/ngrnlh7vnmbvlvZXmjInpkq7vvIzlvLnlh7rmqKHmgIHlr7nor53moYZcblxuLy8gJChmdW5jdGlvbiAoKSB7XG4vLyAgICAgJCgnI2J0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgJCgnLm1hc2std3JhcHBlcicpLnNob3coKTtcbi8vICAgICB9KTtcbi8vXG4vLyAgICAgJCgnLmNsb3NlLWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgJCgnLm1hc2std3JhcHBlcicpLmhpZGUoKVxuLy8gICAgIH0pXG4vLyB9KTtcblxuLy8g55m75b2V5rOo5YaM6aG16Z2i44CA54K55Ye75YiH5o2iXG4vLyAkKGZ1bmN0aW9uICgpIHtcbi8vICAgICQoJy5zd2l0Y2gnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4vLyAgICAgICB2YXIgc3Jjb2xsV3JhcHBlciA9ICQoJy5zY3JvbGwtd3JhcHBlcicpO1xuLy8gICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc3Jjb2xsV3JhcHBlci5jc3MoJ2xlZnQnKTtcbi8vICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpOy8v6Kej5p6Q5Li65pW05Z6LXG4vLyAgICAgICAgaWYoY3VycmVudExlZnQ8MCl7XG4vLyAgICAgICAgICAgIHNyY29sbFdyYXBwZXIuYW5pbWF0ZSh7J2xlZnQnOicwJ30pO1xuLy8gICAgICAgIH1lbHNlIHtcbi8vICAgICAgICAgICAgc3Jjb2xsV3JhcHBlci5hbmltYXRlKHsnbGVmdCc6Jy00MDBweCd9KTtcbi8vICAgICAgICB9XG4vLyAgICB9KTtcbi8vIH0pO1xuLy9cblxuZnVuY3Rpb24gQXV0aCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5tYXNrV3JhcHBlciA9ICQoJy5tYXNrLXdyYXBwZXInKTtcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcbn1cblxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblN3aXRjaEV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5TaWduaW5FdmVudCgpO1xuICAgIHNlbGYubGlzdGVuU2lnbnVwRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlbkltZ0NhcHRjaGFFdmVudCgpO1xuICAgIHNlbGYubGlzdGVuU21zQ2FwdGNoYUV2ZW50KCk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5zaG93RXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xufTtcblxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLm1hc2tXcmFwcGVyLmhpZGUoKVxufTtcblxuLy/jgIDlrp7njrDngrnlh7vnmbvlvZXms6jlhozmjInpkq5cbkF1dGgucHJvdG90eXBlLmxpc3RlblNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzaWduaW5CdG4gPSAkKCcuc2lnbmluLWJ0bicpO1xuICAgIHZhciBzaWdudXBCdG4gPSAkKCcuc2lnbnVwLWJ0bicpO1xuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcbiAgICBzaWduaW5CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnNob3dFdmVudCgpO1xuICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHsnbGVmdCc6MH0pO1xuICAgIH0pO1xuICAgIHNpZ251cEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoeydsZWZ0JzotNDAwfSk7XG4gICAgfSk7XG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XG4gICAgfSk7XG59O1xuXG5cbi8vIOWunueOsOeCueWHu+eZu+W9leazqOWGjOWIh+aNolxuQXV0aC5wcm90b3R5cGUubGlzdGVuU3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzd2l0Y2hlciA9ICQoJy5zd2l0Y2gnKTtcbiAgICBzd2l0Y2hlci5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoJ2xlZnQnKTtcbiAgICAgICAgY3VycmVudExlZnQgPSBwYXJzZUludChjdXJyZW50TGVmdCk7Ly/op6PmnpDkuLrmlbTlnotcbiAgICAgICAgaWYoY3VycmVudExlZnQ8MCl7XG4gICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHsnbGVmdCc6JzAnfSk7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoeydsZWZ0JzonLTQwMHB4J30pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG4vLyDlrp7njrDngrnlh7vlm77niYfmm7TmjaLpqozor4HnoIFcbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW1nQ2FwdGNoYSA9ICQoJy5pbWctY2FwdGNoYScpO1xuICAgIGltZ0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpbWdDYXB0Y2hhLmF0dHIoJ3NyYycsJy9hY2NvdW50L2ltZ19jYXB0Y2hhLycrJz9yYW5kb209JytNYXRoLnJhbmRvbSgpKSAvL+S6p+eUn++8kO+8je+8keS5i+mXtOmaj+acuuaVsFxuICAgIH0pO1xuXG59O1xuXG4vL+OAgOWPkemAgemqjOivgeeggeaIkOWKn+aJp+ihjFxuQXV0aC5wcm90b3R5cGUuc21zU3VjY2Vzc0V2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc21zQ2FwdGNoYSA9ICQoJy5zbXMtY2FwdGNoYS1idG4nKTtcbiAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKCfnn63kv6Hpqozor4HnoIHlj5HpgIHmiJDlip/vvIEnKTtcbiAgICBzbXNDYXB0Y2hhLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgIHZhciBjb3VudCA9IDYwO1xuICAgIHNtc0NhcHRjaGEudW5iaW5kKCdjbGljaycpOyAvLyDlgJLorqHml7bmnJ/pl7Tlj5bmtojngrnlh7vkuovku7ZcbiAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNtc0NhcHRjaGEudGV4dChjb3VudCArICdzJyk7XG4gICAgICAgIGNvdW50ID0gY291bnQgLSAxO1xuICAgICAgICAvLyBjb3VudCAtPSAxO1xuICAgICAgICBpZiAoY291bnQgPD0gMCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICBzbXNDYXB0Y2hhLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgc21zQ2FwdGNoYS50ZXh0KCflj5HpgIHpqozor4HnoIEnKTtcbiAgICAgICAgICAgIHNlbGYubGlzdGVuU21zQ2FwdGNoYUV2ZW50KCk7XG4gICAgICAgIH1cbiAgICB9LCAxMDAwKTsgLy8gMTAwMOavq+enkuaJp+ihjOS4gOasoeWHveaVsFxufTtcblxuXG4vLyDlj5HpgIHnn63kv6Hpqozor4HnoIFcbkF1dGgucHJvdG90eXBlLmxpc3RlblNtc0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHNtc0NhcHRjaGEgPSAkKCcuc21zLWNhcHRjaGEtYnRuJyk7XG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gJChcIi5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgc21zQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcbiAgICAgICAgaWYoIXRlbGVwaG9uZSl7XG4gICAgICAgICAgICBtZXNzYWdlQm94LnNob3dJbmZvKCfor7fovpPlhaXmiYvmnLrlj7fnoIHvvIEnKTtcbiAgICAgICAgfVxuICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICd1cmwnOicvYWNjb3VudC9zbXNfY2FwdGNoYS8nLFxuICAgICAgICAgICAgJ2RhdGEnOntcbiAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOnRlbGVwaG9uZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zbXNTdWNjZXNzRXZlbnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2ZhaWwnOmZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4vLyDlrp7njrDnmbvlvZVcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ25pbkV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc2lnbmluR3JvdXAgPSAkKCcuc2lnbmluLWdyb3VwJyk7XG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xuICAgIHZhciBwYXNzd29yZElucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkJ11cIik7XG4gICAgdmFyIHJlbWVtYmVySW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncmVtZW1iZXInXVwiKTtcblxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcmVtZW1iZXIgPSByZW1lbWJlcklucHV0LnByb3AoXCJjaGVja2VkXCIpO1xuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6Jy9hY2NvdW50L2xvZ2luLycsXG4gICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOnRlbGVwaG9uZSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICdyZW1lbWJlcic6cmVtZW1iZXI/MTowXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsgLy8gYWpheOiwg+eUqFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4vLyDlrp7njrDms6jlhoxcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ251cEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzaWdudXBHcm91cCA9ICQoJy5zaWdudXAtZ3JvdXAnKTtcbiAgICB2YXIgc3VibWl0QnRuID0gc2lnbnVwR3JvdXAuZmluZCgnLnN1Ym1pdC1idG4nKTtcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcbiAgICAgICAgdmFyIHVzZXJuYW1lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndXNlcm5hbWUnXVwiKTtcbiAgICAgICAgdmFyIGltZ0NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdpbWdfY2FwdGNoYSddXCIpO1xuICAgICAgICB2YXIgcGFzc3dvcmQxSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIik7XG4gICAgICAgIHZhciBwYXNzd29yZDJJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDInXVwiKTtcbiAgICAgICAgdmFyIHNtc0NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdzbXNfY2FwdGNoYSddXCIpO1xuXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIGltZ19jYXB0Y2hhID0gaW1nQ2FwdGNoYUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBwYXNzd29yZDIgPSBwYXNzd29yZDJJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHNtc19jYXB0Y2hhID0gc21zQ2FwdGNoYUlucHV0LnZhbCgpO1xuXG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L3JlZ2lzdGVyLycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxuICAgICAgICAgICAgICAgICd1c2VybmFtZSc6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICdpbWdfY2FwdGNoYSc6IGltZ19jYXB0Y2hhLFxuICAgICAgICAgICAgICAgICdwYXNzd29yZDEnOiBwYXNzd29yZDEsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMic6IHBhc3N3b3JkMixcbiAgICAgICAgICAgICAgICAnc21zX2NhcHRjaGEnOiBzbXNfY2FwdGNoYVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgIHZhciBhdXRoID0gbmV3IEF1dGgoKTtcbiAgIGF1dGgucnVuKCk7XG59KTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICB2YXIgZnJvbnRCYXNlID0gbmV3IEZyb250QmFzZSgpO1xuICAgZnJvbnRCYXNlLnJ1bigpO1xufSk7XG5cblxuJChmdW5jdGlvbiAoKSB7XG4gICAgaWYod2luZG93LnRlbXBsYXRlKXtcbiAgICAgICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVWYWx1ZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRlVmFsdWUpO1xuICAgICAgICAgICAgdmFyIGRhdGV0cyA9IGRhdGUuZ2V0VGltZSgpOyAvLyDlvpfliLDnmoTmmK/mr6vnp5LnmoRcbiAgICAgICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7IC8v5b6X5Yiw55qE5piv5b2T5YmN5pe26Ze055qE5pe26Ze05oizXG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gKG5vd3RzIC0gZGF0ZXRzKS8xMDAwOyAvLyDpmaTku6UxMDAw77yM5b6X5Yiw55qE5piv56eSXG4gICAgICAgICAgICBpZih0aW1lc3RhbXAgPCA2MCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAn5Yia5YiaJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKSB7XG4gICAgICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWludXRlcysn5YiG6ZKf5YmNJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KSB7XG4gICAgICAgICAgICAgICAgaG91cnMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaG91cnMrJ+Wwj+aXtuWJjSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKHRpbWVzdGFtcCA+PSA2MCo2MCoyNCAmJiB0aW1lc3RhbXAgPCA2MCo2MCoyNCozMCkge1xuICAgICAgICAgICAgICAgIGRheXMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwIC8gMjQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXlzICsgJ+WkqeWJjSc7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB5ZWFyKycvJyttb250aCsnLycrZGF5K1wiIFwiK2hvdXIrXCI6XCIrbWludXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7Il19
