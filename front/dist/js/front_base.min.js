function FrontBase(){}function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper")}FrontBase.prototype.run=function(){this.listenAuthBoxHover(),this.handleNavStatus()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenSignupEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptchaEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},FrontBase.prototype.handleNavStatus=function(){var t=window.location.href,n=window.location.protocol+"//"+window.location.host,a=t.replace(n,"");$(".nav li").each(function(t,n){var e=$(n);if(e.children("a").attr("href")===a)return e.addClass("active"),!1})},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),a=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),a.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.smsSuccessEvent=function(){var t=this,n=$(".sms-captcha-btn");messageBox.showSuccess("短信验证码发送成功！"),n.addClass("disabled");var e=60;n.unbind("click");var a=setInterval(function(){n.text(e+"s"),(e-=1)<=0&&(clearInterval(a),n.removeClass("disabled"),n.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,t=$(".sms-captcha-btn"),e=$(".signup-group input[name='telephone']");t.click(function(){var t=e.val();t||messageBox.showInfo("请输入手机号码！"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code&&n.smsSuccessEvent()},fail:function(t){console.log(t)}})})},Auth.prototype.listenSigninEvent=function(){var a=this,t=$(".signin-group"),o=t.find("input[name='telephone']"),i=t.find("input[name='password']"),s=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=o.val(),n=i.val(),e=s.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){a.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSignupEvent=function(){var f=$(".signup-group");f.find(".submit-btn").click(function(t){t.preventDefault();var n=f.find("input[name='telephone']"),e=f.find("input[name='username']"),a=f.find("input[name='img_captcha']"),o=f.find("input[name='password1']"),i=f.find("input[name='password2']"),s=f.find("input[name='sms_captcha']"),c=n.val(),r=e.val(),p=a.val(),u=o.val(),l=i.val(),h=s.val();xfzajax.post({url:"/account/register/",data:{telephone:c,username:r,img_captcha:p,password1:u,password2:l,sms_captcha:h},success:function(t){window.location.reload()}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t);console.log(t);var e=n.getTime(),a=((new Date).getTime()-e)/1e3;return a<60?"刚刚":60<=a&&a<3600?(minutes=parseInt(a/60),minutes+"分钟前"):3600<=a&&a<86400?(hours=parseInt(a/60/60),hours+"小时前"):86400<=a&&a<2592e3?(days=parseInt(a/60/60/24),days+"天前"):n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+" "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwicHJvdG90eXBlIiwicnVuIiwibGlzdGVuQXV0aEJveEhvdmVyIiwiaGFuZGxlTmF2U3RhdHVzIiwiYXV0aEJveCIsInVzZXJNb3JlQm94IiwiaG92ZXIiLCJzaG93IiwiaGlkZSIsInNlbGYiLCJsaXN0ZW5TaG93SGlkZUV2ZW50IiwibGlzdGVuU3dpdGNoRXZlbnQiLCJsaXN0ZW5TaWduaW5FdmVudCIsImxpc3RlblNpZ251cEV2ZW50IiwibGlzdGVuSW1nQ2FwdGNoYUV2ZW50IiwibGlzdGVuU21zQ2FwdGNoYUV2ZW50Iiwic2hvd0V2ZW50IiwiaGlkZUV2ZW50IiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZG9tYWluIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aCIsInJlcGxhY2UiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50IiwibGkiLCJjaGlsZHJlbiIsImF0dHIiLCJhZGRDbGFzcyIsInNpZ25pbkJ0biIsInNpZ251cEJ0biIsImNsb3NlQnRuIiwiY2xpY2siLCJjc3MiLCJsZWZ0IiwiY3VycmVudExlZnQiLCJwYXJzZUludCIsImFuaW1hdGUiLCJpbWdDYXB0Y2hhIiwiTWF0aCIsInJhbmRvbSIsInNtc1N1Y2Nlc3NFdmVudCIsInNtc0NhcHRjaGEiLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJjb3VudCIsInVuYmluZCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwidGVsZXBob25lSW5wdXQiLCJ0ZWxlcGhvbmUiLCJ2YWwiLCJzaG93SW5mbyIsInhmemFqYXgiLCJnZXQiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsImZhaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzaWduaW5Hcm91cCIsImZpbmQiLCJwYXNzd29yZElucHV0IiwicmVtZW1iZXJJbnB1dCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwicG9zdCIsInJlbG9hZCIsInNpZ251cEdyb3VwIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJtaW51dGVzIiwiaG91cnMiLCJkYXlzIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyJdLCJtYXBwaW5ncyI6IkFBRUEsU0FBU0EsYUFpRFQsU0FBU0MsT0FDTUMsS0FDTkMsWUFBY0MsRUFBRSxpQkFEVkYsS0FFTkcsY0FBZ0JELEVBQUUsbUJBaEQzQkosVUFBVU0sVUFBVUMsSUFBTSxXQUNYTCxLQUNOTSxxQkFETU4sS0FFTk8sbUJBSVRULFVBQVVNLFVBQVVFLG1CQUFxQixXQUNyQyxJQUFJRSxFQUFVTixFQUFFLGFBQ1pPLEVBQWNQLEVBQUUsa0JBQ3BCTSxFQUFRRSxNQUFNLFdBQ1ZELEVBQVlFLFFBQ1YsV0FDRkYsRUFBWUcsVUFzQ3BCYixLQUFLSyxVQUFVQyxJQUFNLFdBQ2pCLElBQUlRLEVBQU9iLEtBQ1hhLEVBQUtDLHNCQUNMRCxFQUFLRSxvQkFDTEYsRUFBS0csb0JBQ0xILEVBQUtJLG9CQUNMSixFQUFLSyx3QkFDTEwsRUFBS00seUJBR1RwQixLQUFLSyxVQUFVZ0IsVUFBWSxXQUNacEIsS0FDTkMsWUFBWVUsUUFHckJaLEtBQUtLLFVBQVVpQixVQUFZLFdBQ1pyQixLQUNOQyxZQUFZVyxRQUtyQmQsVUFBVU0sVUFBVUcsZ0JBQWtCLFdBQ2xDLElBQUllLEVBQU1DLE9BQU9DLFNBQVNDLEtBR3RCQyxFQUZXSCxPQUFPQyxTQUFTRyxTQUVULEtBRFhKLE9BQU9DLFNBQVNJLEtBRXZCQyxFQUFPUCxFQUFJUSxRQUFRSixFQUFPLElBQ2hCeEIsRUFBRSxXQUNSNkIsS0FBSyxTQUFVQyxFQUFNQyxHQUN6QixJQUFJQyxFQUFLaEMsRUFBRStCLEdBR1gsR0FGV0MsRUFBR0MsU0FBUyxLQUNQQyxLQUFLLFVBQ1hQLEVBRU4sT0FEQUssRUFBR0csU0FBUyxXQUNMLEtBT25CdEMsS0FBS0ssVUFBVVUsb0JBQXNCLFdBQ2pDLElBQUlELEVBQU9iLEtBQ1BzQyxFQUFZcEMsRUFBRSxlQUNkcUMsRUFBWXJDLEVBQUUsZUFDZHNDLEVBQVd0QyxFQUFFLGNBQ2pCb0MsRUFBVUcsTUFBTSxXQUNaNUIsRUFBS08sWUFDTFAsRUFBS1YsY0FBY3VDLElBQUksQ0FBQ0MsS0FBTyxNQUVuQ0osRUFBVUUsTUFBTSxXQUNaNUIsRUFBS08sWUFDTFAsRUFBS1YsY0FBY3VDLElBQUksQ0FBQ0MsTUFBUSxRQUVwQ0gsRUFBU0MsTUFBTSxXQUNaNUIsRUFBS1EsZUFNWnRCLEtBQUtLLFVBQVVXLGtCQUFvQixXQUMvQixJQUFJRixFQUFPYixLQUNJRSxFQUFFLFdBQ1J1QyxNQUFNLFdBQ1gsSUFBSUcsRUFBYy9CLEVBQUtWLGNBQWN1QyxJQUFJLFNBQ3pDRSxFQUFjQyxTQUFTRCxJQUNSLEVBQ1ovQixFQUFLVixjQUFjMkMsUUFBUSxDQUFDSCxLQUFPLE1BRW5DOUIsRUFBS1YsY0FBYzJDLFFBQVEsQ0FBQ0gsS0FBTyxjQU05QzVDLEtBQUtLLFVBQVVjLHNCQUF3QixXQUNuQyxJQUFJNkIsRUFBYTdDLEVBQUUsZ0JBQ25CNkMsRUFBV04sTUFBTSxXQUNiTSxFQUFXWCxLQUFLLE1BQU0sZ0NBQW1DWSxLQUFLQyxhQU10RWxELEtBQUtLLFVBQVU4QyxnQkFBa0IsV0FDN0IsSUFBSXJDLEVBQU9iLEtBQ1BtRCxFQUFhakQsRUFBRSxvQkFDbkJrRCxXQUFXQyxZQUFZLGNBQ3ZCRixFQUFXZCxTQUFTLFlBQ3BCLElBQUlpQixFQUFRLEdBQ1pILEVBQVdJLE9BQU8sU0FDbEIsSUFBSUMsRUFBUUMsWUFBWSxXQUNwQk4sRUFBV08sS0FBS0osRUFBUSxNQUN4QkEsR0FBZ0IsSUFFSCxJQUNUSyxjQUFjSCxHQUNkTCxFQUFXUyxZQUFZLFlBQ3ZCVCxFQUFXTyxLQUFLLFNBQ2hCN0MsRUFBS00sMEJBRVYsTUFLUHBCLEtBQUtLLFVBQVVlLHNCQUF3QixXQUNuQyxJQUFJTixFQUFPYixLQUNQbUQsRUFBYWpELEVBQUUsb0JBQ2YyRCxFQUFpQjNELEVBQUUseUNBQ3ZCaUQsRUFBV1YsTUFBTSxXQUNiLElBQUlxQixFQUFZRCxFQUFlRSxNQUMzQkQsR0FDQVYsV0FBV1ksU0FBUyxZQUV4QkMsUUFBUUMsSUFBSSxDQUNUNUMsSUFBTSx3QkFDTDZDLEtBQU8sQ0FDSkwsVUFBWUEsR0FFZk0sUUFBVSxTQUFVQyxHQUNLLEtBQWxCQSxFQUFhLE1BQ1p4RCxFQUFLcUMsbUJBR2JvQixLQUFPLFNBQVVDLEdBQ2JDLFFBQVFDLElBQUlGLFNBTzVCeEUsS0FBS0ssVUFBVVksa0JBQW9CLFdBQy9CLElBQUlILEVBQU9iLEtBQ1AwRSxFQUFjeEUsRUFBRSxpQkFDaEIyRCxFQUFpQmEsRUFBWUMsS0FBSywyQkFDbENDLEVBQWdCRixFQUFZQyxLQUFLLDBCQUNqQ0UsRUFBZ0JILEVBQVlDLEtBQUssMEJBRXJCRCxFQUFZQyxLQUFLLGVBQ3ZCbEMsTUFBTSxXQUNaLElBQUlxQixFQUFZRCxFQUFlRSxNQUMzQmUsRUFBV0YsRUFBY2IsTUFDekJnQixFQUFXRixFQUFjRyxLQUFLLFdBQ2xDZixRQUFRZ0IsS0FBSyxDQUNUM0QsSUFBTSxrQkFDTjZDLEtBQU8sQ0FDSEwsVUFBWUEsRUFDWmdCLFNBQVdBLEVBQ1hDLFNBQVdBLEVBQVMsRUFBRSxHQUUxQlgsUUFBVSxTQUFVQyxHQUNoQnhELEVBQUtRLFlBQ0xFLE9BQU9DLFNBQVMwRCxlQU9oQ25GLEtBQUtLLFVBQVVhLGtCQUFvQixXQUMvQixJQUFJa0UsRUFBY2pGLEVBQUUsaUJBQ0ppRixFQUFZUixLQUFLLGVBQ3ZCbEMsTUFBTSxTQUFVMkMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQUl4QixFQUFpQnNCLEVBQVlSLEtBQUssMkJBQ2xDVyxFQUFnQkgsRUFBWVIsS0FBSywwQkFDakNZLEVBQWtCSixFQUFZUixLQUFLLDZCQUNuQ2EsRUFBaUJMLEVBQVlSLEtBQUssMkJBQ2xDYyxFQUFpQk4sRUFBWVIsS0FBSywyQkFDbENlLEVBQWtCUCxFQUFZUixLQUFLLDZCQUVuQ2IsRUFBWUQsRUFBZUUsTUFDM0I0QixFQUFXTCxFQUFjdkIsTUFDekI2QixFQUFjTCxFQUFnQnhCLE1BQzlCOEIsRUFBWUwsRUFBZXpCLE1BQzNCK0IsRUFBWUwsRUFBZTFCLE1BQzNCZ0MsRUFBY0wsRUFBZ0IzQixNQUVsQ0UsUUFBUWdCLEtBQUssQ0FDVDNELElBQU8scUJBQ1A2QyxLQUFRLENBQ0pMLFVBQWFBLEVBQ2I2QixTQUFZQSxFQUNaQyxZQUFlQSxFQUNmQyxVQUFhQSxFQUNiQyxVQUFhQSxFQUNiQyxZQUFlQSxHQUVuQjNCLFFBQVcsU0FBVUMsR0FDakI5QyxPQUFPQyxTQUFTMEQsZUFNaENoRixFQUFFLFlBQ1ksSUFBSUgsTUFDVk0sUUFHUkgsRUFBRSxZQUNpQixJQUFJSixXQUNWTyxRQUliSCxFQUFFLFdBQ0txQixPQUFPeUUsV0FDTkEsU0FBU0MsU0FBU0MsUUFBUUMsVUFBWSxTQUFVQyxHQUM1QyxJQUFJQyxFQUFPLElBQUlDLEtBQUtGLEdBQ3BCNUIsUUFBUUMsSUFBSTJCLEdBQ1osSUFBSUcsRUFBU0YsRUFBS0csVUFFZEMsSUFEUSxJQUFLSCxNQUFRRSxVQUNBRCxHQUFRLElBQ2pDLE9BQUdFLEVBQVksR0FDSixLQUVVLElBQWJBLEdBQW1CQSxFQUFZLE1BQ25DQyxRQUFVN0QsU0FBUzRELEVBQVksSUFDeEJDLFFBQVEsT0FFRSxNQUFiRCxHQUFzQkEsRUFBWSxPQUN0Q0UsTUFBUTlELFNBQVM0RCxFQUFZLEdBQUssSUFDM0JFLE1BQU0sT0FFSSxPQUFiRixHQUF5QkEsRUFBWSxRQUN6Q0csS0FBTy9ELFNBQVM0RCxFQUFZLEdBQUssR0FBSyxJQUMvQkcsS0FBTyxNQUVIUCxFQUFLUSxjQUtKLElBSkFSLEVBQUtTLFdBSUssSUFIWlQsRUFBS1UsU0FHZSxJQUZuQlYsRUFBS1csV0FFdUIsSUFEMUJYLEVBQUtZIiwiZmlsZSI6ImZyb250X2Jhc2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4vLyDlpITnkIblr7zoiKrmnaFcbmZ1bmN0aW9uIEZyb250QmFzZSgpIHtcblxufVxuXG5Gcm9udEJhc2UucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5BdXRoQm94SG92ZXIoKTtcbiAgICBzZWxmLmhhbmRsZU5hdlN0YXR1cygpO1xufTtcblxuXG5Gcm9udEJhc2UucHJvdG90eXBlLmxpc3RlbkF1dGhCb3hIb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXV0aEJveCA9ICQoJy5hdXRoLWJveCcpO1xuICAgIHZhciB1c2VyTW9yZUJveCA9ICQoJy51c2VyLW1vcmUtYm94Jyk7XG4gICAgYXV0aEJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVzZXJNb3JlQm94LnNob3coKTtcbiAgICAgICAgfSxmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVzZXJNb3JlQm94LmhpZGUoKTtcbiAgICB9KTtcbn07XG5cblxuLy/ngrnlh7vnmbvlvZXmjInpkq7vvIzlvLnlh7rmqKHmgIHlr7nor53moYZcblxuLy8gJChmdW5jdGlvbiAoKSB7XG4vLyAgICAgJCgnI2J0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgJCgnLm1hc2std3JhcHBlcicpLnNob3coKTtcbi8vICAgICB9KTtcbi8vXG4vLyAgICAgJCgnLmNsb3NlLWJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgJCgnLm1hc2std3JhcHBlcicpLmhpZGUoKVxuLy8gICAgIH0pXG4vLyB9KTtcblxuLy8g55m75b2V5rOo5YaM6aG16Z2i44CA54K55Ye75YiH5o2iXG4vLyAkKGZ1bmN0aW9uICgpIHtcbi8vICAgICQoJy5zd2l0Y2gnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4vLyAgICAgICB2YXIgc3Jjb2xsV3JhcHBlciA9ICQoJy5zY3JvbGwtd3JhcHBlcicpO1xuLy8gICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc3Jjb2xsV3JhcHBlci5jc3MoJ2xlZnQnKTtcbi8vICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpOy8v6Kej5p6Q5Li65pW05Z6LXG4vLyAgICAgICAgaWYoY3VycmVudExlZnQ8MCl7XG4vLyAgICAgICAgICAgIHNyY29sbFdyYXBwZXIuYW5pbWF0ZSh7J2xlZnQnOicwJ30pO1xuLy8gICAgICAgIH1lbHNlIHtcbi8vICAgICAgICAgICAgc3Jjb2xsV3JhcHBlci5hbmltYXRlKHsnbGVmdCc6Jy00MDBweCd9KTtcbi8vICAgICAgICB9XG4vLyAgICB9KTtcbi8vIH0pO1xuLy9cblxuZnVuY3Rpb24gQXV0aCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5tYXNrV3JhcHBlciA9ICQoJy5tYXNrLXdyYXBwZXInKTtcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcbn1cblxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblN3aXRjaEV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5TaWduaW5FdmVudCgpO1xuICAgIHNlbGYubGlzdGVuU2lnbnVwRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlbkltZ0NhcHRjaGFFdmVudCgpO1xuICAgIHNlbGYubGlzdGVuU21zQ2FwdGNoYUV2ZW50KCk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5zaG93RXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xufTtcblxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLm1hc2tXcmFwcGVyLmhpZGUoKVxufTtcblxuXG4vLyDlpITnkIblr7zoiKrmoI/nirbmgIFcbkZyb250QmFzZS5wcm90b3R5cGUuaGFuZGxlTmF2U3RhdHVzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICB2YXIgcHJvdG9jb2wgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7IC8vIOWNj+iuriBodHRwL2h0dHBzXG4gICAgdmFyIGhvc3QgPSB3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICB2YXIgZG9tYWluID0gcHJvdG9jb2wrJy8vJytob3N0O1xuICAgIHZhciBwYXRoID0gdXJsLnJlcGxhY2UoZG9tYWluLCcnKTtcbiAgICB2YXIgbmF2TGlzdCA9ICQoJy5uYXYgbGknKTtcbiAgICBuYXZMaXN0LmVhY2goZnVuY3Rpb24gKGluZGV4LGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGxpID0gJChlbGVtZW50KTsvLyBqc+WvueixoVxuICAgICAgICB2YXIgYVRhZyA9IGxpLmNoaWxkcmVuKCdhJyk7XG4gICAgICAgIHZhciBocmVmID0gYVRhZy5hdHRyKCdocmVmJyk7XG4gICAgICAgIGlmKGhyZWY9PT1wYXRoKXtcbiAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuXG4vL+OAgOWunueOsOeCueWHu+eZu+W9leazqOWGjOaMiemSrlxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHNpZ25pbkJ0biA9ICQoJy5zaWduaW4tYnRuJyk7XG4gICAgdmFyIHNpZ251cEJ0biA9ICQoJy5zaWdudXAtYnRuJyk7XG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpO1xuICAgIHNpZ25pbkJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoeydsZWZ0JzowfSk7XG4gICAgfSk7XG4gICAgc2lnbnVwQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKTtcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7J2xlZnQnOi00MDB9KTtcbiAgICB9KTtcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcbiAgICB9KTtcbn07XG5cblxuLy8g5a6e546w54K55Ye755m75b2V5rOo5YaM5YiH5o2iXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5Td2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHN3aXRjaGVyID0gJCgnLnN3aXRjaCcpO1xuICAgIHN3aXRjaGVyLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc2VsZi5zY3JvbGxXcmFwcGVyLmNzcygnbGVmdCcpO1xuICAgICAgICBjdXJyZW50TGVmdCA9IHBhcnNlSW50KGN1cnJlbnRMZWZ0KTsvL+ino+aekOS4uuaVtOWei1xuICAgICAgICBpZihjdXJyZW50TGVmdDwwKXtcbiAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoeydsZWZ0JzonMCd9KTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7J2xlZnQnOictNDAwcHgnfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbi8vIOWunueOsOeCueWHu+WbvueJh+abtOaNoumqjOivgeeggVxuQXV0aC5wcm90b3R5cGUubGlzdGVuSW1nQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbWdDYXB0Y2hhID0gJCgnLmltZy1jYXB0Y2hhJyk7XG4gICAgaW1nQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGltZ0NhcHRjaGEuYXR0cignc3JjJywnL2FjY291bnQvaW1nX2NhcHRjaGEvJysnP3JhbmRvbT0nK01hdGgucmFuZG9tKCkpIC8v5Lqn55Sf77yQ77yN77yR5LmL6Ze06ZqP5py65pWwXG4gICAgfSk7XG5cbn07XG5cbi8v44CA5Y+R6YCB6aqM6K+B56CB5oiQ5Yqf5omn6KGMXG5BdXRoLnByb3RvdHlwZS5zbXNTdWNjZXNzRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzbXNDYXB0Y2hhID0gJCgnLnNtcy1jYXB0Y2hhLWJ0bicpO1xuICAgIG1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+efreS/oemqjOivgeeggeWPkemAgeaIkOWKn++8gScpO1xuICAgIHNtc0NhcHRjaGEuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgdmFyIGNvdW50ID0gNjA7XG4gICAgc21zQ2FwdGNoYS51bmJpbmQoJ2NsaWNrJyk7IC8vIOWAkuiuoeaXtuacn+mXtOWPlua2iOeCueWHu+S6i+S7tlxuICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc21zQ2FwdGNoYS50ZXh0KGNvdW50ICsgJ3MnKTtcbiAgICAgICAgY291bnQgPSBjb3VudCAtIDE7XG4gICAgICAgIC8vIGNvdW50IC09IDE7XG4gICAgICAgIGlmIChjb3VudCA8PSAwKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICAgIHNtc0NhcHRjaGEucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICBzbXNDYXB0Y2hhLnRleHQoJ+WPkemAgemqjOivgeeggScpO1xuICAgICAgICAgICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcbiAgICAgICAgfVxuICAgIH0sIDEwMDApOyAvLyAxMDAw5q+r56eS5omn6KGM5LiA5qyh5Ye95pWwXG59O1xuXG5cbi8vIOWPkemAgeefreS/oemqjOivgeeggVxuQXV0aC5wcm90b3R5cGUubGlzdGVuU21zQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc21zQ2FwdGNoYSA9ICQoJy5zbXMtY2FwdGNoYS1idG4nKTtcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSAkKFwiLnNpZ251cC1ncm91cCBpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcbiAgICBzbXNDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xuICAgICAgICBpZighdGVsZXBob25lKXtcbiAgICAgICAgICAgIG1lc3NhZ2VCb3guc2hvd0luZm8oJ+ivt+i+k+WFpeaJi+acuuWPt+egge+8gScpO1xuICAgICAgICB9XG4gICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgJ3VybCc6Jy9hY2NvdW50L3Ntc19jYXB0Y2hhLycsXG4gICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6dGVsZXBob25lXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNtc1N1Y2Nlc3NFdmVudCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZmFpbCc6ZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbi8vIOWunueOsOeZu+W9lVxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbmluRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xuXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ25pbkdyb3VwLmZpbmQoXCIuc3VibWl0LWJ0blwiKTtcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcChcImNoZWNrZWRcIik7XG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzonL2FjY291bnQvbG9naW4vJyxcbiAgICAgICAgICAgICdkYXRhJzp7XG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6dGVsZXBob25lLFxuICAgICAgICAgICAgICAgICdwYXNzd29yZCc6cGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgJ3JlbWVtYmVyJzpyZW1lbWJlcj8xOjBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOyAvLyBhamF46LCD55SoXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbi8vIOWunueOsOazqOWGjFxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbnVwRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNpZ251cEdyb3VwID0gJCgnLnNpZ251cC1ncm91cCcpO1xuICAgIHZhciBzdWJtaXRCdG4gPSBzaWdudXBHcm91cC5maW5kKCcuc3VibWl0LWJ0bicpO1xuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xuICAgICAgICB2YXIgdXNlcm5hbWVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd1c2VybmFtZSddXCIpO1xuICAgICAgICB2YXIgaW1nQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J2ltZ19jYXB0Y2hhJ11cIik7XG4gICAgICAgIHZhciBwYXNzd29yZDFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDEnXVwiKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMklucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMiddXCIpO1xuICAgICAgICB2YXIgc21zQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Ntc19jYXB0Y2hhJ11cIik7XG5cbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgaW1nX2NhcHRjaGEgPSBpbWdDYXB0Y2hhSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBwYXNzd29yZDEgPSBwYXNzd29yZDFJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xuICAgICAgICB2YXIgc21zX2NhcHRjaGEgPSBzbXNDYXB0Y2hhSW5wdXQudmFsKCk7XG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvcmVnaXN0ZXIvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgJ2ltZ19jYXB0Y2hhJzogaW1nX2NhcHRjaGEsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMSc6IHBhc3N3b3JkMSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQyJzogcGFzc3dvcmQyLFxuICAgICAgICAgICAgICAgICdzbXNfY2FwdGNoYSc6IHNtc19jYXB0Y2hhXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xuICAgYXV0aC5ydW4oKTtcbn0pO1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgIHZhciBmcm9udEJhc2UgPSBuZXcgRnJvbnRCYXNlKCk7XG4gICBmcm9udEJhc2UucnVuKCk7XG59KTtcblxuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICBpZih3aW5kb3cudGVtcGxhdGUpe1xuICAgICAgICB0ZW1wbGF0ZS5kZWZhdWx0cy5pbXBvcnRzLnRpbWVTaW5jZSA9IGZ1bmN0aW9uIChkYXRlVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZVZhbHVlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGVWYWx1ZSk7XG4gICAgICAgICAgICB2YXIgZGF0ZXRzID0gZGF0ZS5nZXRUaW1lKCk7IC8vIOW+l+WIsOeahOaYr+avq+enkueahFxuICAgICAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsgLy/lvpfliLDnmoTmmK/lvZPliY3ml7bpl7TnmoTml7bpl7TmiLNcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMgLSBkYXRldHMpLzEwMDA7IC8vIOmZpOS7pTEwMDDvvIzlvpfliLDnmoTmmK/np5JcbiAgICAgICAgICAgIGlmKHRpbWVzdGFtcCA8IDYwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICfliJrliJonO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih0aW1lc3RhbXAgPj0gNjAgJiYgdGltZXN0YW1wIDwgNjAqNjApIHtcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjApO1xuICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzKyfliIbpkp/liY0nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih0aW1lc3RhbXAgPj0gNjAqNjAgJiYgdGltZXN0YW1wIDwgNjAqNjAqMjQpIHtcbiAgICAgICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjApO1xuICAgICAgICAgICAgICAgIHJldHVybiBob3Vycysn5bCP5pe25YmNJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwKjI0ICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKSB7XG4gICAgICAgICAgICAgICAgZGF5cyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjAgLyAyNCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRheXMgKyAn5aSp5YmNJztcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgICAgICAgICAgICAgICB2YXIgaG91ciA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHllYXIrJy8nK21vbnRoKycvJytkYXkrXCIgXCIraG91citcIjpcIittaW51dGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KTsiXX0=
